let movies = {
  'stalingrad-2013': {
    imdb_code: 'tt1966566',
    title: 'Stalingrad',
    title_long: 'Stalingrad (2013)',
    id: 'stalingrad-2013',
    year: 2013,
    rating: 5.6,
    runtime: 131,
    genres: [
      'Action',
      'Drama',
      'War'
    ],
    summary: 'STALINGRAD is an epic look at the battle that turned the tide of World War II. A band of determined Russian soldiers fight to hold a strategic building in their devastated city against a ruthless German army, and in the process become deeply connected to two Russian women who have been living there. Presented in IMAX 3D, the scale of the battle contrasts dramatically with the human drama of the Russian soldiers, the few remaining civilians and their invaders into Stalingrad. (c) Sony Worldwide',
    yt_trailer_code: 'l5q8yiXK69I',
    language: 'English',
    mpa_rating: 'R',
    background_image: 'https://yts.am/assets/images/movies/stalingrad_2013/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/stalingrad_2013/medium-cover.jpg',
    reviews: ['RoKYNjc7oXePU9i', 'SD1ExojNzPQ26GR', '8p1EoolGeqiSQnv'],
    user_rating: 0,
    status: 'not-watched',
    user_review_id: null
  },
  'the-hunt-2012': {
    imdb_code: 'tt2106476',
    title: 'The Hunt',
    title_long: 'The Hunt (2012)',
    id: 'the-hunt-2012',
    year: 2012,
    rating: 8.3,
    runtime: 115,
    genres: [
      'Drama'
    ],
    summary: "Lucas is a Kindergarten teacher who takes great care of his students. Unfortunately for him, young Klara has a run-away imagination and concocts a lie about her teacher. Before Lucas is even able to understand the consequences, he has become the outcast of the town. The hunt is on to prove his innocence before it's taken from him for good.",
    yt_trailer_code: 'ieLIOBkMgAQ',
    language: 'English',
    mpa_rating: 'R',
    background_image: 'https://yts.am/assets/images/movies/the_hunt_2012/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/the_hunt_2012/medium-cover.jpg',
    reviews: ['Ub5A3lyJiMzieoq', 'H9ElMMRSbKxguS2'],
    user_rating: 0,
    status: 'not-watched',
    user_review_id: null
  },
  'a-separation-2011': {
    imdb_code: 'tt1832382',
    title: 'A Separation',
    title_long: 'A Separation (2011)',
    id: 'a-separation-2011',
    year: 2011,
    rating: 8.3,
    runtime: 123,
    genres: [
      'Drama',
      'Mystery'
    ],
    summary: 'Nader (Payman Maadi) and Simin (Leila Hatami) argue about living abroad. Simin prefers to live abroad to provide better opportunities for their only daughter, Termeh. However, Nader refuses to go because he thinks he must stay in Iran and take care of his father (Ali-Asghar Shahbazi), who suffers from Alzheimers. However, Simin is determined to get a divorce and leave the country with her daughter.',
    yt_trailer_code: '58Onuy5USTc',
    language: 'English',
    mpa_rating: 'PG-13',
    background_image: 'https://yts.am/assets/images/movies/a_separation_2011/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/a_separation_2011/medium-cover.jpg',
    reviews: ['M6xgMwbHcDHUpY2'],
    user_rating: 0,
    status: 'not-watched',
    user_review_id: null
  },
  'red-sparrow-2018': {
    imdb_code: 'tt2873282',
    title: 'Red Sparrow',
    title_long: 'Red Sparrow (2018)',
    id: 'red-sparrow-2018',
    year: 2018,
    rating: 6.7,
    runtime: 140,
    genres: [
      'Drama',
      'Mystery',
      'Thriller'
    ],
    summary: "A young Russian intelligence officer is assigned to seduce a first-tour CIA agent who handles the CIA's most sensitive penetration of Russian intelligence. The two young officers collide in a charged atmosphere of trade-craft, deception, and inevitably forbidden passion that threatens not just their lives but the lives of others as well.",
    yt_trailer_code: 'PmUL6wMpMWw',
    language: 'English',
    mpa_rating: 'R',
    background_image: 'https://yts.am/assets/images/movies/red_sparrow_2018/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/red_sparrow_2018/medium-cover.jpg',
    reviews: ['EMNeZosKgfNkDxP'],
    user_rating: 0,
    status: 'not-watched',
    user_review_id: null
  },
  'nightworld-2017': {
    imdb_code: 'tt5157052',
    title: 'Nightworld',
    title_long: 'Nightworld (2017)',
    id: 'nightworld-2017',
    year: 2017,
    rating: 4.4,
    runtime: 92,
    genres: [
      'Horror',
      'Thriller'
    ],
    summary: "When former LAPD officer Brett Anderson takes a job as head of security at an old apartment building in Bulgaria's capital, Sofia, he soon begins to experience a series of bizarre and terrifying events. Once he begins to delve deeper into the building's sinister history and investigate its shadowy owners and past employees, Brett soon uncovers a malevolent force nestled deep in the bowels of the building that will do anything to be set free into our world.",
    yt_trailer_code: '0T7jHCQX-Xs',
    language: 'English',
    mpa_rating: '',
    background_image: 'https://yts.am/assets/images/movies/nightworld_2017/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/nightworld_2017/medium-cover.jpg',
    reviews: ['33CQpxObPEIGFqU'],
    user_rating: 0,
    status: 'not-watched',
    user_review_id: null
  },
  'lean-on-pete-2017': {
    imdb_code: 'tt5340300',
    title: 'Lean on Pete',
    title_long: 'Lean on Pete (2017)',
    id: 'lean-on-pete-2017',
    year: 2017,
    rating: 7.4,
    runtime: 121,
    genres: [
      'Adventure',
      'Drama'
    ],
    summary: 'The film follows fifteen-year-old Charley Thompson. He wants a home, food on the table and a high school he can attend for more than part of the year. As the son of a single father working in warehouses across the Pacific Northwest, stability is hard to find. Hoping for a new start they move to Portland, Oregon where Charley takes a summer job, with a washed-up horse trainer, and befriends a failing racehorse named Lean on Pete.',
    yt_trailer_code: 'nzlazAyylw8',
    language: 'English',
    mpa_rating: 'R',
    background_image: 'https://yts.am/assets/images/movies/lean_on_pete_2017/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/lean_on_pete_2017/medium-cover.jpg',
    reviews: ['eO6i8mxKLANVbXZ'],
    user_rating: 0,
    status: 'watched',
    user_review_id: null
  },
  'incoming-2018': {
    imdb_code: 'tt6678874',
    title: 'Incoming',
    title_long: 'Incoming (2018)',
    id: 'incoming-2018',
    year: 2018,
    rating: 3.8,
    runtime: 0,
    genres: [
      'Action',
      'Sci-Fi',
      'Thriller'
    ],
    summary: "The International Space Station is now a prison - the ultimate black site. No one's getting out. And no one knows it's there. But when the imprisoned terrorists take over the Station and turn it into a missile aimed at Moscow, only a shuttle pilot and a rookie doctor can stop them. Their task is complicated by a rogue CIA agent (Scott Adkins) who has his own plans for the station and the terrorists within.",
    yt_trailer_code: 'klqZn-HC0Cg',
    language: 'English',
    mpa_rating: '',
    background_image: 'https://yts.am/assets/images/movies/incoming_2018/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/incoming_2018/medium-cover.jpg',
    reviews: ['mNH7KcunG4mloq6'],
    user_rating: 0,
    status: 'watched',
    user_review_id: null
  },
  'the-forgiven-2017': {
    imdb_code: 'tt2249081',
    title: 'The Forgiven',
    title_long: 'The Forgiven (2017)',
    id: 'the-forgiven-2017',
    year: 2017,
    rating: 5.5,
    runtime: 115,
    genres: [
      'Thriller'
    ],
    summary: 'During his life sentence in post-apartheid South Africa, brutal murderer Piet Blomfield seeks redemption through meetings with Archbishop Desmond Tutu.',
    yt_trailer_code: 'hIsQMp4o5j0',
    language: 'English',
    mpa_rating: 'R',
    background_image: 'https://yts.am/assets/images/movies/the_forgiven_2017/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/the_forgiven_2017/medium-cover.jpg',
    reviews: [],
    user_rating: 0,
    status: 'watched',
    user_review_id: null
  },
  'modern-life-is-rubbish-2017': {
    imdb_code: 'tt2385752',
    title: 'Modern Life Is Rubbish',
    title_long: 'Modern Life Is Rubbish (2017)',
    id: 'modern-life-is-rubbish-2017',
    year: 2017,
    rating: 6.2,
    runtime: 105,
    genres: [
      'Comedy',
      'Music',
      'Romance'
    ],
    summary: "Brought together by their shared love of music, ten years on Liam and Natalie are at breaking point. In their case opposites attract but don't necessarily work long-term. Making the difficult decision to separate, they must split their prized music library. But the sound track that defined their relationship keeps pulling them back together.",
    yt_trailer_code: '7W5R2f6UO0k',
    language: 'English',
    mpa_rating: '',
    background_image: 'https://yts.am/assets/images/movies/modern_life_is_rubbish_2017/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/modern_life_is_rubbish_2017/medium-cover.jpg',
    reviews: [],
    user_rating: 0,
    status: 'watched',
    user_review_id: null
  },
  'us-and-them-2017': {
    imdb_code: 'tt3592750',
    title: 'Us and Them',
    title_long: 'Us and Them (2017)',
    id: 'us-and-them-2017',
    year: 2017,
    rating: 5.4,
    runtime: 83,
    genres: [
      'Crime',
      'Drama',
      'Thriller'
    ],
    summary: 'Angry and frustrated, working class Danny aims to kick start a revolution by turning the tables on the establishment with a deadly game of chance.',
    yt_trailer_code: 'g8QN2lPLmuk',
    language: 'English',
    mpa_rating: '',
    background_image: 'https://yts.am/assets/images/movies/us_and_them_2017/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/us_and_them_2017/medium-cover.jpg',
    reviews: [],
    user_rating: 0,
    status: 'watched',
    user_review_id: null
  },
  'thousand-yard-stare-2018': {
    imdb_code: 'tt7969140',
    title: 'Thousand Yard Stare',
    title_long: 'Thousand Yard Stare (2018)',
    id: 'thousand-yard-stare-2018',
    year: 2018,
    rating: 5,
    runtime: 91,
    genres: [
      'War'
    ],
    summary: "During World War II, German forces crush the Americans at the 'Battle of Kasserine Pass'. A lone Sergeant, Roland Rothach, is separated from his platoon in the North Africa deserts. Captured by German soldiers, he's forced to face his worst fears. Fears that haunt him long after the war ends. Back home he struggles with flashbacks of the horrors and trauma he experienced, a failing marriage, and the emptiness of isolation.",
    yt_trailer_code: '14stxs44e4o',
    language: 'English',
    mpa_rating: '',
    background_image: 'https://yts.am/assets/images/movies/thousand_yard_stare_2018/background.jpg',
    cover_image: 'https://yts.am/assets/images/movies/thousand_yard_stare_2018/medium-cover.jpg',
    reviews: ['3cy342ASJG8ybma'],
    user_rating: 0,
    status: 'watched',
    user_review_id: null
  }
}

let reviews = {
  'RoKYNjc7oXePU9i': {
    id: 'RoKYNjc7oXePU9i',
    movie_id: 'stalingrad-2013',
    text: "There's no arguing with its impressive production values, but Stalingrad should have devoted more attention to the screenplay and spent less on special effects-enhanced spectacle.",
    critic_name: 'Jesse Hassenger',
    avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
  },
  'SD1ExojNzPQ26GR': {
    id: 'SD1ExojNzPQ26GR',
    movie_id: 'stalingrad-2013',
    text: 'Overall, Stalingrad is a bizarre concoction, part Putin-era patriotic chest-thumping and part creaky war melodrama, all set in a superbly recreated ruined city.',
    critic_name: 'Bilge Ebiri',
    avatar: 'https://resizing.flixster.com/D1bSMN0JuCR3NzGo8ePntYdkNjQ=/50x50/v1.YzsyODAwO2c7MTc2ODU7MTIwMDsxNTA7MTUw'
  },
  '8p1EoolGeqiSQnv': {
    id: '8p1EoolGeqiSQnv',
    movie_id: 'stalingrad-2013',
    text: 'If you thought Saving Private Ryan needed to be more like 300, then Stalingrad is the movie for you.',
    critic_name: 'Bilge Ebiri',
    avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
  },
  'Ub5A3lyJiMzieoq': {
    id: 'Ub5A3lyJiMzieoq',
    movie_id: 'the-hunt-2012',
    text: 'this movie is simply a masterpiece. this movie is what i hope to see every time i enter a cinema.',
    critic_name: 'Thomas',
    avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
  },
  'H9ElMMRSbKxguS2': {
    id: 'H9ElMMRSbKxguS2',
    movie_id: 'the-hunt-2012',
    text: "A film for those who stupidly believe there's no smoke without fire.",
    critic_name: 'Andy Koshy',
    avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
  },
  'M6xgMwbHcDHUpY2': {
    id: 'M6xgMwbHcDHUpY2',
    movie_id: 'a-separation-2011',
    text: 'These people seem so real they might live next door. And they probably do.',
    critic_name: 'Tom Long',
    avatar: 'https://resizing.flixster.com/CGvowrzfjlpzUneSyQKMvshx8mo=/50x50/v1.YzsxNTA2O2c7MTc2ODU7MTIwMDszODs0MA'
  },
  'EMNeZosKgfNkDxP': {
    id: 'EMNeZosKgfNkDxP',
    movie_id: 'red-sparrow-2018',
    text: "There isn't much chemistry between the leads, and their sex scenes don't sizzle, but the fault lies with the dopey, confusing script by Justin Haythe that fails to develop their characters with any depth or purpose.",
    critic_name: 'Rex Reed',
    avatar: 'https://resizing.flixster.com/uYC_nt2x7lmoGmjteX3dO5702R8=/50x50/v1.YzsxNjI0O2c7MTc2ODU7MTIwMDszODs0MQ'
  },
  '33CQpxObPEIGFqU': {
    id: '33CQpxObPEIGFqU',
    movie_id: 'nightworld-2017',
    text: 'While subtle, moody horror films can be great, without something solid to coalesce around, eventually the atmosphere dissipates.',
    critic_name: 'Noel Murray',
    avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
  },
  'eO6i8mxKLANVbXZ': {
    id: 'eO6i8mxKLANVbXZ',
    movie_id: 'lean-on-pete-2017',
    text: 'Throughout, Plummer is mesmerizing, his sunken eyes and gaunt face telling of the layers of hardships Charley is forced to endure.',
    critic_name: 'Adam Graham',
    avatar: 'https://resizing.flixster.com/m-XV8ITtIzq9jlWuqgDj9bv_hhM=/50x50/v1.YzsyNzUwO2c7MTc2ODU7MTIwMDsxNTA7MTUw'
  },
  'mNH7KcunG4mloq6': {
    id: 'mNH7KcunG4mloq6',
    movie_id: 'incoming-2018',
    text: 'Wasting Scott Adkins in your movie should be a punishable offense.',
    critic_name: 'Rob Hunter',
    avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
  },
  '3cy342ASJG8ybma': {
    id: '3cy342ASJG8ybma',
    movie_id: 'thousand-yard-stare-2018',
    text: "This is clearly a low budget indie film, so don't go in expecting Band of Brothers or Saving Private Ryan. Having said that, if you're able to look past a few sparse battlefields, and decent, but not perfect VFX, then you'll find a pretty good movie.",
    critic_name: 'Jeff Perry',
    avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
  }
}

export function _getMovies () {
  return new Promise((resolve, reject) => {
    setTimeout(() => resolve({...movies}), 1000)
  })
}

export function _getReviews () {
  return new Promise((resolve, reject) => {
    setTimeout(() => resolve({...reviews}), 1000)
  })
}

export function _saveUserRating ({ id, rating }) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      const movie = {
        ...movies[id],
        user_rating: rating
      }
      movies = {
        ...movies,
        id: movie
      }

      resolve(movie)
    }, 1000)
  })
}

export function _toggleWatch (id) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      const movie = {
        ...movies[id],
        status: movies[id].status === 'watched' ? 'not-watched' : 'watched'
      }
      movies = {
        ...movies,
        id: movie
      }

      resolve(movie)
    }, 1000)
  })
}

function generateId () {
  var text = ''
  var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'

  for (var i = 0; i < 15; i++) {
    text += possible.charAt(Math.floor(Math.random() * possible.length))
  }

  return text
}

export function _saveUserReview ({ id, text, author }) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      const rid = generateId()
      const review = {
        id: rid,
        movie_id: id,
        text,
        critic_name: author,
        avatar: 'https://staticv2-4.rottentomatoes.com/static/images/redesign/user.none.tmb.jpg'
      }

      reviews = {
        ...reviews,
        rid: review
      }

      movies = {
        ...movies,
        id: {
          ...movies[id],
          reviews: movies[id].reviews.concat(rid)
        }
      }

      resolve(review)
    }, 1000)
  })
}
